<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.11.3"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://mitchellhynes.com/posts/fullstack-course/"><!-- Primary Meta Tags --><title>Full-Stack Development Course</title><meta name="title" content="Full-Stack Development Course"><meta name="description" content="A comprehensive guide to full-stack development, covering both frontend and backend, designed for GetCoding students."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://mitchellhynes.com/posts/fullstack-course/"><meta property="og:title" content="Full-Stack Development Course"><meta property="og:description" content="A comprehensive guide to full-stack development, covering both frontend and backend, designed for GetCoding students."><!-- <meta property="og:image" content={new URL(image, Astro.url)} /> --><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://mitchellhynes.com/posts/fullstack-course/"><meta property="twitter:title" content="Full-Stack Development Course"><meta property="twitter:description" content="A comprehensive guide to full-stack development, covering both frontend and backend, designed for GetCoding students."><!-- <meta property="twitter:image" content={new URL(image, Astro.url)} /> --><link rel="stylesheet" href="/_astro/index.Czj8TO_W.css">
<link rel="stylesheet" href="/_astro/_slug_.B_sZisJi.css">
<style>a[data-astro-cid-eimmu3lg]{display:inline-block;text-decoration:none}a[data-astro-cid-eimmu3lg].active{font-weight:bolder;text-decoration:underline}header[data-astro-cid-3ef6ksr2]{margin:0;padding:0 1em;background:#fff;box-shadow:0 2px 8px rgba(var(--black),5%)}h2[data-astro-cid-3ef6ksr2]{margin:0;font-size:1em}h2[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2],h2[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2].active{text-decoration:none}nav[data-astro-cid-3ef6ksr2]{display:flex;align-items:center;justify-content:space-between}nav[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{padding:1em .5em;color:var(--black);border-bottom:4px solid transparent;text-decoration:none}nav[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2].active{text-decoration:none;border-bottom-color:var(--accent)}.social-links[data-astro-cid-3ef6ksr2],.social-links[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{display:flex}@media (max-width: 720px){.social-links[data-astro-cid-3ef6ksr2]{display:none}}footer[data-astro-cid-sz7xmlte]{padding:2em 1em 6em;background:linear-gradient(var(--gray-gradient)) no-repeat;color:rgb(var(--gray));text-align:center}.social-links[data-astro-cid-sz7xmlte]{display:flex;justify-content:center;gap:1em;margin-top:1em}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]{text-decoration:none;color:rgb(var(--gray))}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]:hover{color:rgb(var(--gray-dark))}
main[data-astro-cid-bvzihdzo]{width:calc(100% - 2em);max-width:100%;margin:0}.hero-image[data-astro-cid-bvzihdzo]{width:100%}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;margin:0 auto;border-radius:12px;box-shadow:var(--box-shadow)}.prose[data-astro-cid-bvzihdzo]{width:720px;max-width:calc(100% - 2em);margin:auto;padding:1em;color:rgb(var(--gray-dark))}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{margin:0 0 .5em}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:rgb(var(--gray))}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}
</style></head> <body data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2><a href="/" data-astro-cid-3ef6ksr2>Jester&#39;s Privilege</a></h2> <div class="flex items-center" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> <div class="flex items-center" data-astro-cid-3ef6ksr2> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left" data-astro-cid-3ef6ksr2="true"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg> Back to Mitch .com
</div> </a>  <a href="/posts" class="active" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Blog </a>  </div> <div data-astro-cid-3ef6ksr2></div> </nav> </header>  <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2024-07-30T02:30:00.000Z"> Jul 30, 2024 </time>  </div> <h1 data-astro-cid-bvzihdzo>Full-Stack Development Course</h1> <hr data-astro-cid-bvzihdzo> </div> <div class="post-content" data-astro-cid-bvzihdzo>  <div class="flex flex-row items-start"><div class="flex-1"><img src="/underconstruct.gif" alt="Under Construction"/><p>This page is an Open Source, living reference for my GetCoding students doing the NodeJS module. If you’d like to
edit the content on this page, submit a PR to the <a href="https://github.com/ecumene/ecumene/blob/master/content/fullstack-course.mdx">markdown file</a> on GitHub.</p></div><div class="flex justify-end items-center"><span class="relative mr-2 text-sm bg-blue-500 text-white max-w-[255px] py-[10px] font-sms px-[20px] my-4 rounded-[25px] before:right-[-7px] before:absolute before:w-[20px] before:bottom-0 before:h-[25px] before:bg-blue-500 before:rounded-bl-[16px] after:right-[-8px] after:rounded-bl-[10px] after:w-[8px] after:absolute after:bottom-0 after:bg-background after:h-[25px]">This is a part of a series of tutorials I&#x27;m making to make GetCoding easier.</span><img class="rounded-full mt-auto" alt="A hand drawn picture of myself" src="/profile.jpg" width="50" height="50"/></div></div>
<h1 id="anatomy-of-a-full-stack-app">Anatomy of a Full-Stack App</h1>
<img alt="A diagram showing the difference between the Browser, Node JS and the Database." src="/excalidraw/db.png" style="float:right;width:250px"/>
<p>A stack is a collection of technologies that work together to build an app. A Full-Stack Developer works on the Frontend, Backend and Database.</p>
<p>The Frontend is the part of the app that runs in the browser. The Backend is the part of the app that runs on the server. The Database is the part of the app that stores data.</p>
<p>The stack we choose here make it a “SPA”, or Single Page Application. This means that the Frontend is a single page that is rendered in the browser.</p>
<details><summary>Setting up React</summary><h4 id="111-how-to-setup-react">1.1.1. How to setup React</h4><p>We’ll use Vite to setup React. It’s a new build tool that is much faster, easier to user, and flexible than Create React App.</p><ol>
<li>Open your terminal and run the following command:</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">npm</span><span style="color:#9ECBFF"> init</span><span style="color:#9ECBFF"> vite@latest</span><span style="color:#9ECBFF"> my-app</span><span style="color:#79B8FF"> --</span><span style="color:#79B8FF"> --template</span><span style="color:#9ECBFF"> react</span></span>
<span class="line"></span></code></pre><ol start="2">
<li>Open your terminal and run the following commands:</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> my-app</span></span>
<span class="line"><span style="color:#B392F0">npm</span><span style="color:#9ECBFF"> install</span></span>
<span class="line"><span style="color:#B392F0">npm</span><span style="color:#9ECBFF"> run</span><span style="color:#9ECBFF"> dev</span></span>
<span class="line"></span></code></pre><ol start="3">
<li>Open your browser and go to <code>http://localhost:3000/</code>. This should show a basic react webpage.</li>
</ol><span class="flex justify-center my-12"><span class="flex flex-col border-black border rounded-lg mx-auto"><span class="px-2 border-black border-b gap-3 flex"><span class="flex items-center gap-2"><div class="rounded-lg w-4 h-4 bg-red-500"></div><div class="rounded-lg w-4 h-4 bg-yellow-500"></div><div class="rounded-lg w-4 h-4 bg-green-500"></div></span><div class="flex mt-2 border-black border-t border-r border-l rounded-tr-md rounded-tl-md px-2"><a href="https://localhost:3000" class="font-bold font-sans text-sm">https://localhost:3000</a><div class="pl-1 font-bold font-sans"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></div></div><span class="border-dashed border-black border rounded-sm text-sm px-1 my-auto">HTML</span></span><span class="px-4 py-2 relative"><p>Hello world Vite.</p></span></span></span></details>
<h2 id="1-node-js">1. Node JS</h2>
<p>Node JS is a JavaScript runtime built on Chrome’s V8 JavaScript engine. Node JS uses an event-driven, non-blocking I/O model that makes it lightweight and efficient. Node JS’ package ecosystem, npm, is the largest ecosystem of open source libraries in the world.</p>
<details><summary>What’s the difference between Yarn and NPM?</summary><h4 id="123-yarn">1.2.3. Yarn</h4><p>Yarn is a package manager for JavaScript. It is used to install, update, and remove JavaScript packages. It is similar to NPM.</p><h4 id="124-npm">1.2.4. NPM</h4><p>NPM is a package manager for JavaScript. It is used to install, update, and remove JavaScript packages. It is similar to Yarn.</p><p>Both Yarn and NPM are package managers for JavaScript. They both retrieve packages from the same registry. Yarn is a little faster than NPM. Yarn has a few extra features that NPM doesn’t have. NPM is a little more popular than Yarn.</p><p>Choose NPM for now, use Yarn when NPM gives you problems.</p></details>
<details><summary>1.1. Installation</summary><h4 id="111-windows">1.1.1. Windows</h4><ol>
<li>Download the Windows installer from the <a href="https://nodejs.org/en/download/">Nodes.js® web site</a>.</li>
<li>Run the installer (the .msi file you downloaded in the previous step.)</li>
<li>Follow the prompts in the installer (Accept the license agreement, click the NEXT button a bunch of times and accept the default installation settings).</li>
</ol><h4 id="112-mac">1.1.2. Mac</h4><ol>
<li>Download the Macintosh installer from the <a href="https://nodejs.org/en/download/">Nodes.js® web site</a>.</li>
<li>Run the installer (the .pkg file you downloaded in the previous step.)</li>
<li>Follow the prompts in the installer (Accept the license agreement, click the CONTINUE button a bunch of times and accept the default installation settings).</li>
</ol><h4 id="113-linux">1.1.3. Linux</h4><ol>
<li>Open your terminal and run the following command:</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt-get</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> nodejs</span></span>
<span class="line"></span></code></pre><p>If that doesn’t work, install a better Distro or Google it.</p></details>
<h3 id="12-node-js-hello-world">1.2. Node JS Hello World</h3>
<ol>
<li>Create a file named <code>hello.js</code> and add the following code:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;Hello world&quot;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span></code></pre>
<ol start="2">
<li>Open your terminal and run the following command:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">node</span><span style="color:#9ECBFF"> hello.js</span></span>
<span class="line"></span></code></pre>
<p>This should print <code>Hello world</code> in your terminal. This is similar to the console in your browser. This is because Node JS is a JavaScript runtime built on Chrome’s V8 JavaScript engine.</p>
<details><summary>What’s the difference between Browser JavaScript and Node JS?</summary><h4 id="121-browser-javascript">1.2.1. Browser JavaScript</h4><p>Browser JavaScript is very limited. It can only run in the browser and can only access the browser’s APIs. It can’t access the file system, it can’t access the network, it can’t access the operating system, etc.</p><h4 id="122-node-js">1.2.2. Node JS</h4><p>Node JS is a JavaScript runtime with a lot more capabilities. It can access the file system, it can access the network, it can access the operating system, etc. It can also run outside of the browser. This means that you can run JavaScript on your computer without opening a browser.</p><p>Browser JavaScript and Node JS are both JavaScript, but they are not the same thing. They are two different environments (<strong>runtimes</strong>) with different capabilities. Browser JavaScript is used to make websites. Node JS is used to make servers, games, tools, etc that run on your computer directly.</p></details>
<h2 id="2-express-js">2. Express JS</h2>
<p>Express JS is a web framework for Node JS. It is designed for building web applications and APIs.</p>
<details><summary>What is a web framework?</summary><h4 id="211-what-is-a-web-framework">2.1.1. What is a web framework?</h4><p>A web framework is a collection of libraries and tools that make it easier to build web applications and APIs. It provides a lot of functionality out of the box so that you don’t have to write it yourself. This includes things like routing, templating, authentication, etc.</p><h4 id="212-why-use-a-web-framework">2.1.2. Why use a web framework?</h4><p>Node JS has raw HTTP APIs that you can use to build web applications and APIs. However, these APIs are very low level. They are not very easy to use and they don’t provide a lot of functionality out of the box. This means that you have to write a lot of code yourself. This is why we use a web framework. It provides a lot of functionality out of the box so that you don’t have to write it yourself.</p></details>
<details><summary>What is an API?</summary><h4 id="213-what-is-an-api">2.1.3. What is an API?</h4><p>An API is an Application Programming Interface. It is a set of functions and procedures that allow the creation of applications which access the features or data of an operating system, application, or other service.</p><p><strong>Ex:</strong> The DOM API is a set of functions and procedures that allow the creation of applications which access the features or data of the DOM.</p><h4 id="214-what-is-a-web-api">2.1.4. What is a web API?</h4><p>A web API is an API that is accessed over the web. It is a set of functions and procedures that allow the creation of web applications which access the features or data of an operating system, application, or other service.</p><p><strong>Ex:</strong> A web API that allows you to access the features or data of a database.</p></details>
<h3 id="21-where-to-put-an-express-js-application">2.1. Where to put an Express JS application</h3>
<p>You can put an Express JS application anywhere you want. However it’s good in the beginning to colocate your Backend and Frontend code in the same repository. This means that you should put your Express JS application in the same directory as your React JS application.</p>
<details><summary>What is colocating?</summary><h4 id="215-what-is-colocating">2.1.5. What is colocating?</h4><p>Colocating is when your Frontend and Backend code are in the same directory. This is convenient because related code is in the same place. It also makes it easier to deploy your app because you only have to deploy one directory.</p></details>
<div class="flex justify-around gap-8"><div><p><strong>Option 1: [Preferred]</strong> Frontend in the root and backend in a folder inside the root.</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">my-app/</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> node_modules/</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> backend/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> node_modules/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> index.js</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   └──</span><span style="color:#9ECBFF"> package.json</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> public/</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> src/</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> .gitignore</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> package.json</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> README.md</span></span>
<span class="line"><span style="color:#B392F0">└──</span><span style="color:#9ECBFF"> yarn.lock</span></span>
<span class="line"></span></code></pre></div><div><p><strong>Option 2:</strong> Frontend and backend in folders inside the same directory.</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">my-app/</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> backend/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> node_modules/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> index.js</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   └──</span><span style="color:#9ECBFF"> package.json</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> frontend/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> node_modules/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> public/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> src/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> .gitignore</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> package.json</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> README.md</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   └──</span><span style="color:#9ECBFF"> yarn.lock</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> .gitignore</span></span>
<span class="line"><span style="color:#B392F0">└──</span><span style="color:#9ECBFF"> README.md</span></span>
<span class="line"></span></code></pre></div></div>
<h3 id="22-express-js-hello-world">2.2. Express JS Hello World</h3>
<ol>
<li>Open your terminal and run the following command:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">npm</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> express</span></span>
<span class="line"></span></code></pre>
<ol start="2">
<li>Hello World</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> express</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> require</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;express&quot;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> app</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> express</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;/&quot;</span><span style="color:#E1E4E8">, (</span><span style="color:#FFAB70">req</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">res</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  res.</span><span style="color:#B392F0">send</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;Hello world&quot;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span></code></pre>
<ol start="3">
<li>Open your terminal and run the following command:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">node</span><span style="color:#9ECBFF"> index.js</span></span>
<span class="line"></span></code></pre>
<ol start="4">
<li>Open your browser and go to <code>http://localhost:3000/</code>. This should print <code>Hello world</code> in your browser.</li>
</ol>
<span class="flex justify-center my-12"><span class="flex flex-col border-black border rounded-lg mx-auto"><span class="px-2 border-black border-b gap-3 flex"><span class="flex items-center gap-2"><div class="rounded-lg w-4 h-4 bg-red-500"></div><div class="rounded-lg w-4 h-4 bg-yellow-500"></div><div class="rounded-lg w-4 h-4 bg-green-500"></div></span><div class="flex mt-2 border-black border-t border-r border-l rounded-tr-md rounded-tl-md px-2"><a href="https://localhost:3000" class="font-bold font-sans text-sm">https://localhost:3000</a><div class="pl-1 font-bold font-sans"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></div></div><span class="border-dashed border-black border rounded-sm text-sm px-1 my-auto">HTML</span></span><span class="px-4 py-2 relative"><p>Hello World</p></span></span></span>
<details><summary>What is a route?</summary><h4 id="216-what-is-a-route">2.1.6. What is a route?</h4><p>A route is a section of Express JS code that handles a specific HTTP request. It is a section of Express JS code that handles a specific HTTP request.</p><p><strong>Ex:</strong> The <code>/</code> route handles the <code>GET</code> request to <code>/</code>.</p></details>
<details><summary>Can I use my terminal to make HTTP requests?</summary><h4 id="215-can-i-use-my-terminal-to-make-http-requests">2.1.5. Can I use my terminal to make HTTP requests?</h4><p>Yes. You can use the <code>curl</code> command to make HTTP requests from your terminal.</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">curl</span><span style="color:#9ECBFF"> http://localhost:3000/</span></span>
<span class="line"></span></code></pre><p><strong>Response:</strong></p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">Hello</span><span style="color:#9ECBFF"> world</span></span>
<span class="line"></span></code></pre></details>
<h2 id="3-mysql">3. MySQL</h2>
<p>MySQL is a relational database management system. It uses SQL to query data, create tables, and insert data and is the most popular database model in the world.</p>
<details><summary>What is a database?</summary><h4 id="311-what-is-a-database">3.1.1. What is a database?</h4><p>Bad data causes businesses to fail, lose customers, and lose money. A database is a collection of data that is organized so that it can be easily accessed, managed, and updated.</p></details>
<details><summary>What is a database?</summary><h4 id="312-what-is-a-relational-database">3.1.2. What is a relational database?</h4><p>A relational database is a database that stores data in tables. A table is a collection of related data entries and it consists of columns and rows.</p><p>Relations are established between tables by matching data in columns. This is done by creating a column in one table that contains data that exists in another table. This column is called a foreign key.</p></details>
<details><summary>Why not use a NoSQL database?</summary><h4 id="313-why-not-use-a-nosql-database">3.1.3. Why not use a NoSQL database?</h4><p>First, always bet on SQL. It has been here since the 70s and will be here for much longer. As will the relational model. It is a proven technology that has been used by millions of developers for decades.</p><div class="flex justify-end items-center"><span class="relative mr-2 text-sm bg-blue-500 text-white max-w-[255px] py-[10px] font-sms px-[20px] my-4 rounded-[25px] before:right-[-7px] before:absolute before:w-[20px] before:bottom-0 before:h-[25px] before:bg-blue-500 before:rounded-bl-[16px] after:right-[-8px] after:rounded-bl-[10px] after:w-[8px] after:absolute after:bottom-0 after:bg-background after:h-[25px]">Look into CODASYL DBTG. It was a Network Database that was also around when the first Relational Model was proposed. It used XML instead of JSON. It was also very bad because to query data you had to handle a cursor yourself in code. It was replaced by Relational Databases because they were much easier to use. I belive the same thing will happen to NoSQL databases.</span><img class="rounded-full mt-auto" alt="A hand drawn picture of myself" src="/profile.jpg" width="50" height="50"/></div><p>Second, NoSQL databases have no schema. This means that you can store any data in any format in any table. This makes it very hard to query the data. It also makes it very hard to maintain the data. This is why NoSQL databases are not used in production.</p><div class="flex justify-end items-center"><span class="relative mr-2 text-sm bg-blue-500 text-white max-w-[255px] py-[10px] font-sms px-[20px] my-4 rounded-[25px] before:right-[-7px] before:absolute before:w-[20px] before:bottom-0 before:h-[25px] before:bg-blue-500 before:rounded-bl-[16px] after:right-[-8px] after:rounded-bl-[10px] after:w-[8px] after:absolute after:bottom-0 after:bg-background after:h-[25px]">Yes, Mongoose does exist. But you must realise that breaks sharding, so your webscale app will not be webscale.</span><img class="rounded-full mt-auto" alt="A hand drawn picture of myself" src="/profile.jpg" width="50" height="50"/></div></details>
<details><summary>3.2. Installation</summary><h4 id="321-windows">3.2.1. Windows</h4><ol>
<li>Download the Windows installer from the <a href="https://dev.mysql.com/downloads/installer/">MySQL Community Downloads</a> page.</li>
<li>Run the installer (the .msi file you downloaded in the previous step.)</li>
<li>Follow the prompts in the installer (Accept the license agreement, click the NEXT button a bunch of times and accept the default installation settings).</li>
</ol><h4 id="322-mac">3.2.2. Mac</h4><ol>
<li>Download the Macintosh installer from the <a href="https://dev.mysql.com/downloads/installer/">MySQL Community Downloads</a> page.</li>
<li>Run the installer (the .pkg file you downloaded in the previous step.)</li>
<li>Follow the prompts in the installer (Accept the license agreement, click the CONTINUE button a bunch of times and accept the default installation settings).</li>
</ol><h4 id="323-linux">3.2.3. Linux</h4><ol>
<li>Open your terminal and run the following command:</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt-get</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> mysql-server</span></span>
<span class="line"></span></code></pre><p>If that doesn’t work, install a better Distro or Google it.</p></details>
<h3 id="33-mysql-for-developers">3.3. MySQL for Developers</h3>
<p>PlanetScale has a great <a href="https://planetscale.com/learn/courses/mysql-for-developers">MySQL for Developers course</a> that you can follow to learn MySQL. It’s free and it’s the best resource I’ve found for beginners learning MySQL. It gently introduces you to MySQL and even dives into advanced topics near the end.</p>
<div class="flex justify-end items-center"><span class="relative mr-2 text-sm bg-blue-500 text-white max-w-[255px] py-[10px] font-sms px-[20px] my-4 rounded-[25px] before:right-[-7px] before:absolute before:w-[20px] before:bottom-0 before:h-[25px] before:bg-blue-500 before:rounded-bl-[16px] after:right-[-8px] after:rounded-bl-[10px] after:w-[8px] after:absolute after:bottom-0 after:bg-background after:h-[25px]">If you learn even half of the course, you will be very productive with MySQL. If you learn the whole course, you will be far ahead of most developers I&#x27;ve worked with.</span><img class="rounded-full mt-auto" alt="A hand drawn picture of myself" src="/profile.jpg" width="50" height="50"/></div>
<h3 id="34-mysql-hello-world">3.4. MySQL Hello World</h3>
<ol>
<li>Open your terminal and run the following command:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">mysql</span><span style="color:#79B8FF"> -u</span><span style="color:#9ECBFF"> root</span><span style="color:#79B8FF"> -p</span></span>
<span class="line"></span></code></pre>
<ol start="2">
<li>Enter your password.</li>
<li>Create a database with a name that matches your project name for consistency.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F97583">CREATE</span><span style="color:#F97583"> DATABASE</span><span style="color:#B392F0"> my_app</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span></code></pre>
<ol start="4">
<li>Create a table for your users.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F97583">CREATE</span><span style="color:#F97583"> TABLE</span><span style="color:#B392F0"> my_app</span><span style="color:#E1E4E8">.users (</span></span>
<span class="line"><span style="color:#E1E4E8">  id </span><span style="color:#F97583">INT</span><span style="color:#F97583"> NOT NULL</span><span style="color:#E1E4E8"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#F97583">  name</span><span style="color:#F97583"> VARCHAR</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">255</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">NOT NULL</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  email </span><span style="color:#F97583">VARCHAR</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">255</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">NOT NULL</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#F97583">  password</span><span style="color:#F97583"> VARCHAR</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">255</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">NOT NULL</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#F97583">  PRIMARY KEY</span><span style="color:#E1E4E8"> (id)</span></span>
<span class="line"><span style="color:#E1E4E8">);</span></span>
<span class="line"></span></code></pre>
<ol start="5">
<li>Insert a user into the table.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F97583">INSERT INTO</span><span style="color:#79B8FF"> my_app</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">users</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">name</span><span style="color:#E1E4E8">, email, </span><span style="color:#F97583">password</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">VALUES</span><span style="color:#E1E4E8"> (</span><span style="color:#9ECBFF">&quot;John Doe&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&quot;john@doe.com&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&quot;password&quot;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span></code></pre>
<ol start="6">
<li>Select all users from the table.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F97583">SELECT</span><span style="color:#F97583"> *</span><span style="color:#F97583"> FROM</span><span style="color:#79B8FF"> my_app</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">users</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span></code></pre>
<p>You should see the user that you inserted in the previous step.</p>
<h2 id="4-authentication-and-authorization">4. Authentication and Authorization</h2>
<p>Authentication is the process of verifying who you are. Authorization is the process of verifying what you can do.</p>
<details><summary>What is the difference between Authentication and Authorization?</summary><h4 id="411-what-is-the-difference-between-authentication-and-authorization">4.1.1. What is the difference between Authentication and Authorization?</h4><p>Think of Authentication as a keycard to a building. It verifies who you are. Think of Authorization as the permissions that you have in the building. It’s the act of stopping you from going into rooms that you don’t have access to.</p></details>
<p>First we need to setup express-session. This is a middleware that allows us to store data in the session. This is useful for storing data about the user. We can use this to store the user’s ID after they login. We can then use this to get the user’s ID on every request.</p>
<details><summary>What is a middleware?</summary><h4 id="412-what-is-a-middleware">4.1.2. What is a middleware?</h4><p>A middleware is a function that runs before your route handler. It can be used to modify the request and response objects. It can also be used to run code before your route handler.</p></details>
<details><summary>Session vs. Cookies</summary><h4 id="413-what-is-a-session">4.1.3. What is a session?</h4><p>Sessions are used to store data about the user. The session lives on the server and is identified by a session ID. The session ID is stored in a cookie on the client. This cookie is sent to the server on every request. This allows the server to identify the user.</p><p>Cookies are a way to store data on the client. Express-session uses cookies to store the session ID on the client. This allows the server to identify the user on every request. We look up the session ID in the database to get the user’s ID. We can then use this to get the user’s ID on every request.</p><p>Cookies and Sessions work together to store data about the user. Cookies are used to store data on the client. Sessions are used to store data on the server.</p></details>
<details><summary>Why do we need to connect Express-session to MySQL?</summary><h4 id="414-why-do-we-need-to-connect-express-session-to-mysql">4.1.4. Why do we need to connect Express-session to MySQL?</h4><p>Express-session stores the session data in memory by default. This means that the session data is lost when the server restarts, logging the user out. So every change you make to the server’s code will log all users out which is very annoying for development.</p><p>We can fix this by connecting Express-session to MySQL. This allows us to store the session data in MySQL. The data will be stored in a table called <code>sessions</code>. This means that the session data will not be lost when the server restarts.</p></details>
<h3 id="41-setting-up-express-session">4.1. Setting up Express-session</h3>
<ol>
<li>Open your terminal and run the following command:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">npm</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> express-session</span><span style="color:#9ECBFF"> express-mysql-session</span></span>
<span class="line"></span></code></pre>
<ol start="2">
<li>Open your <code>index.js</code> file and add the following code:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> mysql </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &quot;mysql2/promise&quot;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> session </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &quot;express-session&quot;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> MySQLStore </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &quot;express-mysql-session&quot;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> express </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &quot;express&quot;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> url</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> process.env.</span><span style="color:#79B8FF">MYSQL_URL</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> connection</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> mysql.</span><span style="color:#B392F0">createPool</span><span style="color:#E1E4E8">(url);</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> sessionStore</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> MySQLStore</span><span style="color:#E1E4E8">({}, connection);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> app</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> express</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">use</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#B392F0">  session</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">    secret: </span><span style="color:#9ECBFF">&quot;keyboardcat&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    store: sessionStore,</span></span>
<span class="line"><span style="color:#E1E4E8">    resave: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    saveUninitialized: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  })</span></span>
<span class="line"><span style="color:#E1E4E8">);</span></span>
<span class="line"></span></code></pre>
<ol start="3">
<li>Creating a login and register route</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">post</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;/login&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">req</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">res</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> { </span><span style="color:#79B8FF">email</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">password</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> req.body;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">user</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;SELECT * FROM users WHERE email = ?&quot;</span><span style="color:#E1E4E8">, [</span></span>
<span class="line"><span style="color:#E1E4E8">    email,</span></span>
<span class="line"><span style="color:#E1E4E8">  ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">user) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">400</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;User not found&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (user.password </span><span style="color:#F97583">!==</span><span style="color:#E1E4E8"> password) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">400</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Incorrect password&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  req.session.user </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> user;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Logged in&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">post</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;/register&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">req</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">res</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> { </span><span style="color:#79B8FF">name</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">email</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">password</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> req.body;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">user</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;SELECT * FROM users WHERE email = ?&quot;</span><span style="color:#E1E4E8">, [</span></span>
<span class="line"><span style="color:#E1E4E8">    email,</span></span>
<span class="line"><span style="color:#E1E4E8">  ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (user) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">400</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;User already exists&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">    &quot;INSERT INTO users (name, email, password) VALUES (?, ?, ?)&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    [name, email, password]</span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  req.session.user </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> user;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Registered&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span></code></pre>
<details><summary>What is a POST request?</summary><h4 id="415-what-is-a-post-request">4.1.5. What is a POST request?</h4><p>A POST request is an HTTP request that is used to send data to the server. It’s distinct from a GET request which is used to get data from the server. GET doesn’t have a body, POST does which is why it’s used to send data to the server.</p></details>
<details><summary>What is a 400 status code?</summary><h4 id="416-what-is-a-400-status-code">4.1.6. What is a 400 status code?</h4><p>A 400 status code is an HTTP status code that means that the request was bad. It’s distinct from a 200 status code which means that the request was good.</p><p>See <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">HTTP Status Codes</a> for more information. Or see <a href="https://http.cat/">HTTP.cat</a> for a list of HTTP status codes and a laugh.</p></details>
<details><summary>What is a JSON response?</summary><h4 id="417-what-is-a-json-response">4.1.7. What is a JSON response?</h4><blockquote>
<p><strong>JSON</strong>: JavaScript Object Notation</p>
</blockquote><p>JSON is a lightweight data-interchange format. It is used to send data to the client. It is also used to send data to the server and can be used to store data in files.</p><p>A JSON response is an HTTP response that is used to send arbitrary JSON data to the client. It’s distinct from a HTML response which is used to send Webpages to the client.</p><div class="flex justify-between"><div><h4 id="html-response">HTML Response</h4><p>HTML is used to send a webpage to the client.</p><span class="flex justify-center my-12"><span class="flex flex-col border-black border rounded-lg mx-auto"><span class="px-2 border-black border-b gap-3 flex"><span class="flex items-center gap-2"><div class="rounded-lg w-4 h-4 bg-red-500"></div><div class="rounded-lg w-4 h-4 bg-yellow-500"></div><div class="rounded-lg w-4 h-4 bg-green-500"></div></span><div class="flex mt-2 border-black border-t border-r border-l rounded-tr-md rounded-tl-md px-2"><a href="https://localhost:3000" class="font-bold font-sans text-sm">https://localhost:3000</a><div class="pl-1 font-bold font-sans"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></div></div><span class="border-dashed border-black border rounded-sm text-sm px-1 my-auto">HTML</span></span><span class="px-4 py-2 relative"><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&lt;</span><span style="color:#85E89D">html</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">  &lt;</span><span style="color:#85E89D">h1</span><span style="color:#E1E4E8">&gt;Hello World&lt;/</span><span style="color:#85E89D">h1</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">&lt;/</span><span style="color:#85E89D">html</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"></span></code></pre></span></span></span></div><div><h4 id="json-response">JSON Response</h4><p>JSON is used to send data to the client.</p><span class="flex justify-center my-12"><span class="flex flex-col border-black border rounded-lg mx-auto"><span class="px-2 border-black border-b gap-3 flex"><span class="flex items-center gap-2"><div class="rounded-lg w-4 h-4 bg-red-500"></div><div class="rounded-lg w-4 h-4 bg-yellow-500"></div><div class="rounded-lg w-4 h-4 bg-green-500"></div></span><div class="flex mt-2 border-black border-t border-r border-l rounded-tr-md rounded-tl-md px-2"><a href="https://localhost:3000" class="font-bold font-sans text-sm">https://localhost:3000</a><div class="pl-1 font-bold font-sans"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></div></div><span class="border-dashed border-black border rounded-sm text-sm px-1 my-auto">JSON</span></span><span class="px-4 py-2 relative"><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="json"><code><span class="line"><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#79B8FF">  &quot;message&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;Hello World&quot;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre></span></span></span></div></div></details>
<details><summary>Step-by-step notes on login and register</summary><h4 id="418-step-by-step-notes-on-login-and-register">4.1.8. Step-by-step notes on login and register</h4><ol>
<li>The user enters their email and password into the login form and clicks the login button.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>email:</span></span>
<span class="line"><span>password:</span></span>
<span class="line"><span></span></span></code></pre><ol start="2">
<li>The browser sends a POST request to <code>/login</code> with the email and password in the body.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>POST /login HTTP/1.1</span></span>
<span class="line"><span>Host: localhost:3000</span></span>
<span class="line"><span>Content-Type: application/json</span></span>
<span class="line"><span></span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;email&quot;: &quot;john@doe.com&quot;,</span></span>
<span class="line"><span>  &quot;password&quot;: &quot;password&quot;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span></code></pre><ol start="3">
<li>The server receives the request and looks up the user in the database.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F97583">SELECT</span><span style="color:#F97583"> *</span><span style="color:#F97583"> FROM</span><span style="color:#E1E4E8"> users </span><span style="color:#F97583">WHERE</span><span style="color:#E1E4E8"> email </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> &quot;john@doe.com&quot;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span></code></pre><ol start="4">
<li>The server checks if the user exists.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">user) {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">400</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;User not found&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre><ol start="5">
<li>The server checks if the password is correct.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> (user.password </span><span style="color:#F97583">!==</span><span style="color:#E1E4E8"> password) {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">400</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Incorrect password&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre><ol start="6">
<li>The server sets the user in the session.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">req.session.user </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> user;</span></span>
<span class="line"></span></code></pre><ol start="7">
<li>The server sends a JSON response to the client.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>HTTP/1.1 200 OK</span></span>
<span class="line"><span>Content-Type: application/json</span></span>
<span class="line"><span></span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;message&quot;: &quot;Logged in&quot;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span></code></pre></details>
<details><summary>How to login using ReactJS</summary><h4 id="419-how-to-login-using-reactjs">4.1.9. How to login using ReactJS</h4><ol>
<li>Open your <code>App.js</code> file and add the following code:</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> React, { useState } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &quot;react&quot;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> App</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">email</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">setEmail</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;&quot;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">password</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">setPassword</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;&quot;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#B392F0"> handleSubmit</span><span style="color:#F97583"> =</span><span style="color:#F97583"> async</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">event</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span></span>
<span class="line"><span style="color:#F97583">    await</span><span style="color:#B392F0"> fetch</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;http://localhost:3000/login&quot;</span><span style="color:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#E1E4E8">      method: </span><span style="color:#9ECBFF">&quot;POST&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      headers: { </span><span style="color:#9ECBFF">&quot;Content-Type&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;application/json&quot;</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">      body: </span><span style="color:#79B8FF">JSON</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">stringify</span><span style="color:#E1E4E8">({ email, password }),</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &lt;&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">      &lt;</span><span style="color:#85E89D">input</span></span>
<span class="line"><span style="color:#B392F0">        type</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;email&quot;</span></span>
<span class="line"><span style="color:#B392F0">        value</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{email}</span></span>
<span class="line"><span style="color:#B392F0">        onChange</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{(</span><span style="color:#FFAB70">e</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#B392F0"> setEmail</span><span style="color:#E1E4E8">(e.target.value)}</span></span>
<span class="line"><span style="color:#E1E4E8">      /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">      &lt;</span><span style="color:#85E89D">input</span></span>
<span class="line"><span style="color:#B392F0">        type</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">&quot;password&quot;</span></span>
<span class="line"><span style="color:#B392F0">        value</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{password}</span></span>
<span class="line"><span style="color:#B392F0">        onChange</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{(</span><span style="color:#FFAB70">e</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#B392F0"> setPassword</span><span style="color:#E1E4E8">(e.target.value)}</span></span>
<span class="line"><span style="color:#E1E4E8">      /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">      &lt;</span><span style="color:#85E89D">button</span><span style="color:#B392F0"> onClick</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{handleSubmit}&gt;Login&lt;/</span><span style="color:#85E89D">button</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre></details>
<h3 id="42-securing-your-passwords">4.2. Securing your passwords</h3>
<p>Storing passwords in plain text is a bad idea. If someone gets access to your database, they will have access to all of your users’ passwords. This is why we hash passwords. Hashing is a one-way function that converts a password into a hash. This hash can then be stored in the database in place of the password. This means that if someone gets access to your database, they will not have access to your users’ passwords.</p>
<details><summary>What is a hash?</summary><h4 id="421-what-is-a-hash">4.2.1. What is a hash?</h4><p>A hash is a one-way function that converts a password into a hash. One-way meaning that you can’t convert a hash back into a password.</p><p>You can check if a password matches a hash by hashing the password and comparing it to the hash. If they match, the password is correct. If they don’t match, the password is incorrect.</p><p>You should never log, or store a password. It should always be sent across the network in plain text then immediately converted to a hash.</p></details>
<details><summary>What is a salt?</summary><h4 id="422-what-is-a-salt">4.2.2. What is a salt?</h4><p>A salt is a random string that is added to a password before it is hashed. This makes it harder to crack the password. It also makes it harder to crack multiple passwords at once.</p><p>Without a salt, two users with the same password will have the same hash. This means that if you crack one password, you crack all of them. With a salt, two users with the same password will have different hashes. This means that if you crack one password, you don’t crack all of them.</p></details>
<h3 id="43-setting-up-bcrypt">4.3. Setting up bcrypt</h3>
<ol>
<li>Open your terminal and install bcrypt:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">npm</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> bcrypt</span></span>
<span class="line"></span></code></pre>
<ol start="2">
<li>Next, we’ll import bcrypt and set the salt rounds in <code>index.js</code>:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> bcrypt</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> require</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;bcrypt&quot;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> saltRounds</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 10</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span></code></pre>
<ol start="3">
<li><strong>[Registry/Change Password]</strong>: Hashing a password</li>
</ol>
<p>Store the hash in the database instead of the password.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> hash</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> bcrypt.</span><span style="color:#B392F0">hash</span><span style="color:#E1E4E8">(password, saltRounds);</span></span>
<span class="line"></span></code></pre>
<ol start="4">
<li><strong>[Login]</strong>: Comparing a password to a hash</li>
</ol>
<p>Compare the hash to the password in the database.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> match</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> bcrypt.</span><span style="color:#B392F0">compare</span><span style="color:#E1E4E8">(password, hash);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">match) {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">400</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Incorrect password&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>This code replaces your existing code for hashing and comparing passwords. It uses bcrypt to hash and compare passwords. It also uses a salt to make it harder to crack the password.</p>
<details><summary>Step-by-step notes on hashing and comparing passwords</summary><h4 id="431-step-by-step-notes-on-hashing-and-comparing-passwords">4.3.1. Step-by-step notes on hashing and comparing passwords</h4><ol>
<li>The user enters their password into the login form and clicks the login button.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>password:</span></span>
<span class="line"><span></span></span></code></pre><ol start="2">
<li>The browser sends a POST request to <code>/login</code> with the password in the body.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>POST /login HTTP/1.1</span></span>
<span class="line"><span>Host: localhost:3000</span></span>
<span class="line"><span>Content-Type: application/json</span></span>
<span class="line"><span></span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;password&quot;: &quot;password&quot;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span></code></pre><ol start="3">
<li>The server receives the request and looks up the user in the database.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F97583">SELECT</span><span style="color:#F97583"> *</span><span style="color:#F97583"> FROM</span><span style="color:#E1E4E8"> users </span><span style="color:#F97583">WHERE</span><span style="color:#E1E4E8"> email </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> &quot;john@doe.com&quot;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span></code></pre><ol start="4">
<li>The server checks if the user exists.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">user) {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">400</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;User not found&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre><ol start="5">
<li>The server compares the password to the hash.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> match</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> bcrypt.</span><span style="color:#B392F0">compare</span><span style="color:#E1E4E8">(password, hash);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">match) {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">400</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Incorrect password&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre><ol start="6">
<li>The server sets the user in the session.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">req.session.user </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> user;</span></span>
<span class="line"></span></code></pre><ol start="7">
<li>The server sends a JSON response to the client.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>HTTP/1.1 200 OK</span></span>
<span class="line"><span>Content-Type: application/json</span></span>
<span class="line"><span></span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;message&quot;: &quot;Logged in&quot;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span></code></pre></details>
<h3 id="44-authorization">4.4. Authorization</h3>
<p>Now that we have authentication, we need to add authorization. This is the process of verifying what you can do.</p>
<details><summary>What is a foreign key?</summary><h4 id="441-what-is-a-foreign-key">4.4.1. What is a foreign key?</h4><p>A foreign key is a column in a table that references a column in another table. It stops us from adding data to the table that doesn’t exist in the other table. It also allows us to join the tables together to get data from both tables. You can also use it to delete data from both tables at once.</p></details>
<details><summary>What is a join?</summary><h4 id="442-what-is-a-join">4.4.2. What is a join?</h4><p>A join is a way to combine data from two tables. It is used to get data from both tables at once. It is also used to get data from one table that references data in another table.</p></details>
<details><summary>What is a cascade?</summary><h4 id="443-what-is-a-cascade">4.4.3. What is a cascade?</h4><p>A cascade is a way to delete data from multiple tables at once. It is used to delete data from a table that references data in another table.</p><p>When you delete data from users like so:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F97583">DELETE</span><span style="color:#F97583"> FROM</span><span style="color:#E1E4E8"> users </span><span style="color:#F97583">WHERE</span><span style="color:#E1E4E8"> id </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span></code></pre><p>You also want to delete data from todos like so:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F97583">DELETE</span><span style="color:#F97583"> FROM</span><span style="color:#E1E4E8"> todos </span><span style="color:#F97583">WHERE</span><span style="color:#E1E4E8"> user_id </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span></code></pre><p>But you don’t want to do this manually. You want to do this automatically. This is where a cascade comes in. It allows you to delete data from multiple tables at once.</p><p>You can do this with a cascade like so:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F97583">FOREIGN KEY</span><span style="color:#E1E4E8"> (user_id) </span><span style="color:#F97583">REFERENCES</span><span style="color:#E1E4E8"> users(id) </span><span style="color:#F97583">ON DELETE CASCADE</span></span>
<span class="line"></span></code></pre><p>So when you delete data from users like so:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F97583">DELETE</span><span style="color:#F97583"> FROM</span><span style="color:#E1E4E8"> users </span><span style="color:#F97583">WHERE</span><span style="color:#E1E4E8"> id </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span></code></pre><p>It will also delete data from todos without you having to do the second query.</p></details>
<h3 id="441-creating-a-todo-model">4.4.1 Creating a todo model</h3>
<p>Before we go ahead with Authorization we need a model to check against. This table can record anything you want, if you’re building a blog it can record the title, body, and user_id of the todo. If you’re building a social media app it can record the text, image, and user_id of the todo. If you’re building a todo app it can record the text, and user_id of the todo. You get the idea.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F97583">CREATE</span><span style="color:#F97583"> TABLE</span><span style="color:#B392F0"> my_app</span><span style="color:#E1E4E8">.todo (</span></span>
<span class="line"><span style="color:#E1E4E8">  id </span><span style="color:#F97583">INT</span><span style="color:#F97583"> NOT NULL</span><span style="color:#E1E4E8"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#E1E4E8">  title </span><span style="color:#F97583">VARCHAR</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">255</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">NOT NULL</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  body </span><span style="color:#F97583">TEXT</span><span style="color:#F97583"> NOT NULL</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  user_id </span><span style="color:#F97583">INT</span><span style="color:#F97583"> NOT NULL</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#F97583">  PRIMARY KEY</span><span style="color:#E1E4E8"> (id),</span></span>
<span class="line"><span style="color:#F97583">  FOREIGN KEY</span><span style="color:#E1E4E8"> (user_id) </span><span style="color:#F97583">REFERENCES</span><span style="color:#E1E4E8"> users(id) </span><span style="color:#F97583">ON DELETE CASCADE</span></span>
<span class="line"><span style="color:#E1E4E8">);</span></span>
<span class="line"></span></code></pre>
<h3 id="442-creating-a-todo">4.4.2 Creating a todo</h3>
<p>Now that we have a todos model we need a route to create todos. This route will be protected by authorization. This means that only logged in users can create todos. This is done by checking if the user is logged in before creating the todo.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">post</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;/todo&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">req</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">res</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">req.session.user) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">401</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Unauthorized&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> { </span><span style="color:#79B8FF">title</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">body</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> req.body;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">    &quot;INSERT INTO todo (title, body, user_id) VALUES (?, ?, ?)&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    [title, body, req.session.user.id]</span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Created todo&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span></code></pre>
<details><summary>What is a 401 status code?</summary><h4 id="444-what-is-a-401-status-code">4.4.4. What is a 401 status code?</h4><p>A 401 status code is an HTTP status code that means that the user is not logged in. It’s distinct from a 200 status code which means that the user is logged in.</p><p>See <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">HTTP Status Codes</a> for more information. Or see <a href="https://http.cat/">HTTP.cat</a> for a list of HTTP status codes and a laugh.</p></details>
<details><summary>Step-by-step notes on creating a todo</summary><h4 id="445-step-by-step-notes-on-creating-a-todo">4.4.5. Step-by-step notes on creating a todo</h4><ol>
<li>The user enters their title and body into the create todo form and clicks the create todo button.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>title:</span></span>
<span class="line"><span>body:</span></span>
<span class="line"><span></span></span></code></pre><ol start="2">
<li>The browser sends a POST request to <code>/todos</code> with the title and body in the body.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>POST /todo HTTP/1.1</span></span>
<span class="line"><span>Host: localhost:3000</span></span>
<span class="line"><span>Content-Type: application/json</span></span>
<span class="line"><span></span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;title&quot;: &quot;Hello world&quot;,</span></span>
<span class="line"><span>  &quot;body&quot;: &quot;This is my first todo&quot;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span></code></pre><ol start="3">
<li>The server receives the request and checks if the user is logged in.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">req.session.user) {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">401</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Unauthorized&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre><ol start="4">
<li>The server creates the todo.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#F97583">INSERT INTO</span><span style="color:#E1E4E8"> todos (title, body, user_id) </span><span style="color:#F97583">VALUES</span><span style="color:#E1E4E8"> (</span><span style="color:#9ECBFF">&quot;Hello world&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&quot;This is my first todo&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span></code></pre><ol start="5">
<li>The server sends a JSON response to the client.</li>
</ol><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="plaintext"><code><span class="line"><span>HTTP/1.1 200 OK</span></span>
<span class="line"><span>Content-Type: application/json</span></span>
<span class="line"><span></span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;message&quot;: &quot;Created todo&quot;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span></code></pre></details>
<h3 id="443-retrieving-a-todo">4.4.3 Retrieving a todo</h3>
<p>Now that we have a todo we need a route to retrieve it. This route will be protected by authorization. This means that only logged in users can retrieve todos. This is done by checking if the user is logged in before retrieving the todo.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;/todo/:id&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">req</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">res</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">req.session.user) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">401</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Unauthorized&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">todo</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;SELECT * FROM todo WHERE id = ?&quot;</span><span style="color:#E1E4E8">, [</span></span>
<span class="line"><span style="color:#E1E4E8">    req.params.id,</span></span>
<span class="line"><span style="color:#E1E4E8">  ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">todo) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">404</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Todo not found&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (todo.user_id </span><span style="color:#F97583">!==</span><span style="color:#E1E4E8"> req.session.user.id) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">401</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Unauthorized&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">(todo);</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span></code></pre>
<h3 id="444-retrieving-all-todos">4.4.4 Retrieving all todos</h3>
<p>Now that we have a todo we need a route to retrieve all todos. This route will be protected by authorization. This means that only logged in users can retrieve todos. This is done by checking if the user is logged in before retrieving the todos.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;/todos&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">req</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">res</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">req.session.user) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">401</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Unauthorized&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">todos</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">    &quot;SELECT * FROM todo WHERE user_id = ?&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    [req.session.user.id]</span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">(todos);</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span></code></pre>
<h3 id="445-updating-a-todo">4.4.5 Updating a todo</h3>
<p>Now that we have a todo we need a route to update it. This route will be protected by authorization. This means that only logged in users can update todos. This is done by checking if the user is logged in before updating the todo.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">put</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;/todo/:id&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">req</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">res</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">req.session.user) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">401</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Unauthorized&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">todo</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;SELECT * FROM todo WHERE id = ?&quot;</span><span style="color:#E1E4E8">, [</span></span>
<span class="line"><span style="color:#E1E4E8">    req.params.id,</span></span>
<span class="line"><span style="color:#E1E4E8">  ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">todo) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">404</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Todo not found&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (todo.user_id </span><span style="color:#F97583">!==</span><span style="color:#E1E4E8"> req.session.user.id) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">401</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Unauthorized&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> { </span><span style="color:#79B8FF">title</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">body</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> req.body;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;UPDATE todo SET title = ?, body = ? WHERE id = ?&quot;</span><span style="color:#E1E4E8">, [</span></span>
<span class="line"><span style="color:#E1E4E8">    title,</span></span>
<span class="line"><span style="color:#E1E4E8">    body,</span></span>
<span class="line"><span style="color:#E1E4E8">    req.params.id,</span></span>
<span class="line"><span style="color:#E1E4E8">  ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Updated todo&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span></code></pre>
<h3 id="446-deleting-a-todo">4.4.6 Deleting a todo</h3>
<p>Now that we have a todo we need a route to delete it. This route will be protected by authorization. This means that only logged in users can delete todos. This is done by checking if the user is logged in before deleting the todo.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">delete</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;/todo/:id&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">req</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">res</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">req.session.user) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">401</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Unauthorized&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">todo</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;SELECT * FROM todo WHERE id = ?&quot;</span><span style="color:#E1E4E8">, [</span></span>
<span class="line"><span style="color:#E1E4E8">    req.params.id,</span></span>
<span class="line"><span style="color:#E1E4E8">  ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">todo) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">404</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Todo not found&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (todo.user_id </span><span style="color:#F97583">!==</span><span style="color:#E1E4E8"> req.session.user.id) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">status</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">401</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Unauthorized&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;DELETE FROM todo WHERE id = ?&quot;</span><span style="color:#E1E4E8">, [req.params.id]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Deleted todo&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span></code></pre>
<h2 id="5-mvc-architecture">5. MVC Architecture</h2>
<p>MVC stands for Model View Controller. It is a software design pattern that separates the data, logic, and presentation of an application. It is used to make applications easier to maintain and extend.</p>
<details><summary>What is a software design pattern?</summary><h4 id="511-what-is-a-software-design-pattern">5.1.1. What is a software design pattern?</h4><p>A software design pattern is a general, reusable solution to a commonly occurring problem within a given context in software design. It is a general, reusable solution to a commonly occurring problem within a given context in software design.</p></details>
<h3 id="50-folder-structure">5.0. Folder structure</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">my-app/</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> node_modules/</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> backend/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> node_modules/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> index.js</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> package.json</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> src/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   │</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> controllers/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   │</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> models/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   │</span><span style="color:#9ECBFF">   └──</span><span style="color:#9ECBFF"> views/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> .gitignore</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> package.json</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> README.md</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   └──</span><span style="color:#9ECBFF"> yarn.lock</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> frontend/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> node_modules/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> public/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> src/</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> .gitignore</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> package.json</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   ├──</span><span style="color:#9ECBFF"> README.md</span></span>
<span class="line"><span style="color:#B392F0">│</span><span style="color:#9ECBFF">   └──</span><span style="color:#9ECBFF"> yarn.lock</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> .gitignore</span></span>
<span class="line"><span style="color:#B392F0">└──</span><span style="color:#9ECBFF"> README.md</span></span>
<span class="line"></span></code></pre>
<h3 id="51-model">5.1. Model</h3>
<p>The model is the data of the application. It is the data that is stored in the database. It is the data that is sent to the client. It is the data that is received from the client. It is the data that is used to make decisions in the application.</p>
<p>Let’s create a model for our todos</p>
<p><strong><code>backend/src/models/todo.js</code></strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> connection</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> require</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;../connection&quot;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> ToDoService</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> create</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">title</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">body</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">userId</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">      &quot;INSERT INTO todo (title, body, user_id) VALUES (?, ?, ?)&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      [title, body, userId]</span></span>
<span class="line"><span style="color:#E1E4E8">    );</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> get</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">id</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">todo</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;SELECT * FROM todo WHERE id = ?&quot;</span><span style="color:#E1E4E8">, [</span></span>
<span class="line"><span style="color:#E1E4E8">      id,</span></span>
<span class="line"><span style="color:#E1E4E8">    ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> todo;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> getAll</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">userId</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">todos</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">      &quot;SELECT * FROM todo WHERE user_id = ?&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      [userId]</span></span>
<span class="line"><span style="color:#E1E4E8">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> todos;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> update</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">id</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">title</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">body</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;UPDATE todo SET title = ?, body = ? WHERE id = ?&quot;</span><span style="color:#E1E4E8">, [</span></span>
<span class="line"><span style="color:#E1E4E8">      title,</span></span>
<span class="line"><span style="color:#E1E4E8">      body,</span></span>
<span class="line"><span style="color:#E1E4E8">      id,</span></span>
<span class="line"><span style="color:#E1E4E8">    ]);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> delete</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">id</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    await</span><span style="color:#E1E4E8"> connection.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;DELETE FROM todo WHERE id = ?&quot;</span><span style="color:#E1E4E8">, [id]);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">module</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">exports</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> ToDoService</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span></code></pre>
<h3 id="52-controller">5.2. Controller</h3>
<p>The controller is the logic of the application. It is the logic that is used to make decisions in the application. It is the logic that is used to make decisions in the application. It is the logic that is used to make decisions in the application.</p>
<p>Let’s import our model into our controller and use it to create a todo.</p>
<p><strong><code>backend/src/controllers/todo.js</code></strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> ToDoService</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> require</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;../models/todo&quot;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> ToDoController</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> create</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">req</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">res</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#E1E4E8"> { </span><span style="color:#79B8FF">title</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">body</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> req.body;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    await</span><span style="color:#E1E4E8"> ToDoService.</span><span style="color:#B392F0">create</span><span style="color:#E1E4E8">(title, body, req.session.user.id);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ message: </span><span style="color:#9ECBFF">&quot;Created todo&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">module</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">exports</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> ToDoController</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span></code></pre>
<h3 id="53-view">5.3. View</h3>
<p>The view is the presentation of the application. In this case we’re building an API so our view is routes that return JSON. In other cases it could be a webpage, a mobile app, or a desktop app.</p>
<p>Let’s create a view for our todos</p>
<p><strong><code>backend/src/views/todo.js</code></strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> ToDoController</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> require</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;../controllers/todo&quot;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">module</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">exports</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">app</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  app.</span><span style="color:#B392F0">post</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;/todo&quot;</span><span style="color:#E1E4E8">, ToDoController.create);</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span></code></pre>
<h3 id="54-the-app">5.4. The app</h3>
<p>Now that we have our model, controller, and view we need to connect them to our app. This is done by importing our view into our app.</p>
<p><strong><code>backend/src/index.js</code></strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> express</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> require</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;express&quot;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> app</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> express</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">require</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;./views/todo&quot;</span><span style="color:#E1E4E8">)(app);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">listen</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">3000</span><span style="color:#E1E4E8">, () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;Server listening on port 3000&quot;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span></code></pre>
<p>This is a very simple example of MVC. It’s not perfect but it’s a good start. It’s a good start because it separates the data, logic, and presentation of the application.</p>
<h2 id="6-deployment">6. Deployment</h2>
<p>Deployment is the process of making your application available to the public. It is the process of making your application available to the public.</p>
<p>We’ll deploy our app to Fly.io. It’s a great service that makes it easy to deploy your app to the cloud. It’s also free for small apps.</p>
<details><summary>What is the cloud?</summary><h4 id="611-what-is-the-cloud">6.1.1. What is the cloud?</h4><p>The cloud is a network of servers that are used to store data and run applications. It is a network of servers that are used to store data and run applications.</p></details>
<p>First install Docker, then install the Fly CLI.</p>
<details><summary>Installing Docker</summary><h4 id="612-installing-docker">6.1.2. Installing Docker</h4><p><strong>Windows</strong></p><ol>
<li>Download the Windows installer from the <a href="https://hub.docker.com/editions/community/docker-ce-desktop-windows/">Docker Desktop for Windows</a> page.</li>
<li>Run the installer (the .msi file you downloaded in the previous step.)</li>
<li>Follow the prompts in the installer (Accept the license agreement, click the NEXT button a bunch of times and accept the default installation settings).</li>
</ol><p><strong>Mac</strong></p><ol>
<li>Download the Macintosh installer from the <a href="https://hub.docker.com/editions/community/docker-ce-desktop-mac/">Docker Desktop for Mac</a> page.</li>
<li>Run the installer (the .dmg file you downloaded in the previous step.)</li>
<li>Follow the prompts in the installer (Accept the license agreement, click the CONTINUE button a bunch of times and accept the default installation settings).</li>
</ol></details>
<details><summary>Installing the Fly CLI</summary><h4 id="613-installing-the-fly-cli">6.1.3. Installing the Fly CLI</h4><p>Download the installer from the <a href="https://fly.io/docs/hands-on/install-flyctl/">Fly CLI</a> page.</p></details>
<h3 id="62-creating-a-fly-app">6.2. Creating a Fly app</h3>
<p>First we need to create a Fly app. This is done by running the following command:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">flyctl</span><span style="color:#9ECBFF"> apps</span><span style="color:#9ECBFF"> create</span><span style="color:#79B8FF"> --name</span><span style="color:#9ECBFF"> my-app</span></span>
<span class="line"></span></code></pre>
<p>This will create a Fly app with the name <code>my-app</code>. You can change this to whatever you want.</p>
<h3 id="63-creating-a-fly-database">6.3. Creating a Fly database</h3>
<p>Next we need to create a Fly database. This is done by running the following command:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">fly</span><span style="color:#9ECBFF"> volumes</span><span style="color:#9ECBFF"> create</span><span style="color:#9ECBFF"> mysqldata</span><span style="color:#79B8FF"> --size</span><span style="color:#79B8FF"> 10</span><span style="color:#6A737D"> # gb</span></span>
<span class="line"><span style="color:#6A737D"># Set secrets:</span></span>
<span class="line"><span style="color:#6A737D"># MYSQL_PASSWORD      - password set for user $MYSQL_USER</span></span>
<span class="line"><span style="color:#6A737D"># MYSQL_ROOT_PASSWORD - password set for user &quot;root&quot;</span></span>
<span class="line"><span style="color:#B392F0">fly</span><span style="color:#9ECBFF"> secrets</span><span style="color:#9ECBFF"> set</span><span style="color:#9ECBFF"> MYSQL_PASSWORD=password</span><span style="color:#9ECBFF"> MYSQL_ROOT_PASSWORD=password</span></span>
<span class="line"></span></code></pre>
<p>Now follow the rest of the instructions in the <a href="https://fly.io/docs/app-guides/mysql-on-fly/">Fly MySQL</a> guide.</p>  </div> </div> </article> </main> <footer data-astro-cid-sz7xmlte>
Made by Mitchell Hynes. The contents of this blog are MIT Licensed unless
  another License is specified for an artefact, and the code is available on <a href="https://github.com/ecumene/ecumene" class="text-red-500" data-astro-cid-sz7xmlte>Github</a>.
<div class="social-links" data-astro-cid-sz7xmlte>
You have my consent to train a machine learning model on this data. I will
    live forever in devine digital form.
</div> </footer>  </body></html>